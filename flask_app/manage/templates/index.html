{% extends 'base_manage.html' %}

{% block content %}
    <div class="container-fluid">
   <div class="row">
      {# æ±‡æ€»æ•°æ®å±•ç¤º #}
      <div class="col-md-12 mb-4 mt-1">
         <div class="d-flex flex-wrap justify-content-between align-items-center">
             <h4 class="font-weight-bold">é¦–é¡µ</h4>
             <div class="container">
                <div class="row justify-content-end">
                    <div class="col-auto">
                        <label for="weibo-link" class="col-form-label">è¯·è¾“å…¥å¾®åšé“¾æ¥:</label>
                    </div>
                    <div class="col-auto">
                        <input type="text" id="weibo-link" name="weibo-link" class="form-control" placeholder="" style="width:400px">
                    </div>
                    <div class="col-auto">
                        <button onclick="submitWeiboLink()" class="btn btn-primary">å¼€å§‹åˆ†æ</button>
                        <span>------</span>
                        <button onclick="showAllData()" class="btn btn-primary" style="background-color: orange">åˆ†æå…¨éƒ¨æ•°æ®</button>
                    </div>
                </div>
            </div>
         </div>
      </div>

       <script>
            function submitWeiboLink() {
                var weiboLink = document.getElementById("weibo-link").value;
                // æäº¤åˆ°è§†å›¾å‡½æ•°è¿›è¡Œå¤„ç†
                window.location.href = 'http://127.0.0.1:8001/0?url=' + weiboLink
            }

            function showAllData() {
                window.location.href = 'http://127.0.0.1:8001/0?getAllData=True'
            }
       </script>

      {# æ€»å¾®åšä¸ªæ•° #}
      <div class="col-lg-8 col-md-12">
         <div class="row">
            <div class="col-md-4">
               <div class="card">
                  <div class="card-body">
                     <div class="d-flex align-items-center">
                        <div class="">
                            {% if is_get_url == 1 %}
                                <p class="mb-2 text-secondary">æ€»è¯„è®ºä¸ªæ•°</p>
                            {% else %}
                                <p class="mb-2 text-secondary">æ€»å¾®åšä¸ªæ•°</p>
                            {% endif %}
                            <div class="d-flex flex-wrap justify-content-start align-items-center">
                               <h5 class="mb-0 font-weight-bold">{{ article_count }}</h5>
<!--                               <p class="mb-0 ml-3 text-success font-weight-bold">+3.55%</p>-->
                            </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            {# æœ€é«˜ç‚¹èµæ•° #}
            <div class="col-md-4">
                <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="">
                            <p class="mb-2 text-secondary">æœ€é«˜ç‚¹èµæ•°</p>
                            <div class="d-flex flex-wrap justify-content-start align-items-center">
                               <h5 class="mb-0 font-weight-bold">{{ like_count_max }}</h5>
<!--                               <p class="mb-0 ml-3 text-success font-weight-bold">+2.67%</p>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            {# æœ€é«˜ç‚¹èµä½œè€… #}
            <div class="col-md-4">
                <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="">
                           <p class="mb-2 text-secondary">æœ€é«˜ç‚¹èµä½œè€…</p>
                           <div class="d-flex flex-wrap justify-content-start align-items-center">
<!--                               è¶…å‡ºä¸€è¡Œåˆ™éšè—å‰©ä½™éƒ¨åˆ†-->
<!--                              <h5 class="mb-0 font-weight-bold" style="width: 100px; overflow: hidden;text-overflow: ellipsis;white-space: nowrap;" >{{ like_count_max_author }}</h5>-->
                              <h5 class="mb-0 font-weight-bold" style="width: 100px; text-overflow: ellipsis;">{{ like_count_max_author }}</h5>
<!--                              <p class="mb-0 ml-3 text-danger font-weight-bold">-9.98%</p>-->
                           </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            {# è¯„è®ºæœ€å¤šåŸå¸‚ #}
            <div class="col-md-4">
                <div class="card">
                <div class="card-body">
                    <div class="d-flex align-items-center">
                        <div class="">
                           <p class="mb-2 text-secondary">è¯„è®ºæœ€å¤šåŸå¸‚</p>
                           <div class="d-flex flex-wrap justify-content-start align-items-center">
                              <h5 class="mb-0 font-weight-bold">{{ citys_count[0][0] }}</h5>
<!--                              <p class="mb-0 ml-3 text-danger font-weight-bold">-9.98%</p>-->
                           </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            {# å¾®åšå‘å¸ƒæ—¶é—´ä¸ªæ•° #}
            <div class="col-md-12">
                <div class="card">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center flex-wrap">
                        {% if is_get_url == 1 %}
                            <h4 class="font-weight-bold">è¯„è®ºå‘å¸ƒæ—¶é—´ä¸ªæ•°</h4>
                        {% else %}
                            <h4 class="font-weight-bold">å¾®åšå‘å¸ƒæ—¶é—´ä¸ªæ•°</h4>
                        {% endif %}
                  </div>
                   <div id="main" style="width: 100%; height: 342px;" class="custom-chart"></div>
                </div>
            </div>
            </div>
         </div>
      </div>

      {# å¾®åšç‚¹èµæ•°æ’åº #}
      <div class="col-lg-4 col-md-8" style="padding-left:0px">
         <div class="card card-block card-stretch card-height">
            <div class="card-header card-header-border d-flex justify-content-between">
               <div class="header-title">
                   {% if is_get_url == 1 %}
                        <h4 class="card-title">è¯„è®ºç‚¹èµæ•°æ’åº</h4>
                   {% else %}
                        <h4 class="card-title">å¾®åšç‚¹èµæ•°æ’åº</h4>
                   {% endif %}
               </div>
            </div>
            <div class="card-body-list">
               <ul class="list-style-3 mb-0">
                    {% if is_get_url == 1 %}
                        {% for i in range(0, 4)  %}
                            <li class="p-3 list-item d-flex justify-content-start align-items-center" style="padding-right: 14px!important">
                            <div class="avatar">
                               <p>
                                  ğŸ‘¤ {{ comments_like_count[i][6] }}
                               </p>
                               <p class="mb-0" style="color: #ccc;width: 256px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;font-size: 14px;">
                                   <a href="#" style="color: #ccc;">{{ comments_like_count[i][2] }}</a>
                               </p>
                            </div>
                    <!--                        <div class="list-style-detail ml-3 mr-2">-->
                    <!--                           -->
                    <!--                        </div>-->
                            <div class="list-style-action d-flex justify-content-end ml-auto">
                               <h6 class="font-weight-bold text-danger">ğŸ‘{{ comments_like_count[i][3] }}</h6>
                            </div>
                         </li>
                        {% endfor %}
                    {% else %}
                        {% for i in range(0, 4)  %}
                            <li class="p-3 list-item d-flex justify-content-start align-items-center" style="padding-right: 14px!important">
                            <div class="avatar">
                               <p>
                                  ğŸ‘¤ {{ articles_like_count[i][6] }}
                               </p>
                               <p class="mb-0" style="color: #ccc;width: 256px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;font-size: 14px;">
                                   <a href="{{ articles_like_count[i][5] }}" style="color: #ccc;">{{ articles_like_count[i][4] }}</a>
                               </p>
                            </div>
                    <!--                        <div class="list-style-detail ml-3 mr-2">-->
                    <!--                           -->
                    <!--                        </div>-->
                            <div class="list-style-action d-flex justify-content-end ml-auto">
                               <h6 class="font-weight-bold text-danger">ğŸ‘{{ articles_like_count[i][2] }}</h6>
                            </div>
                         </li>
                        {% endfor %}
                    {% endif %}
               </ul>
<!--               <div class="d-flex justify-content-end align-items-center border-top-table p-3">-->
<!--                  <a href="" class="btn btn-secondary btn-sm">æŸ¥çœ‹å…¨éƒ¨</a>-->
<!--               </div>-->
            </div>
         </div>

      </div>

      {# æƒ…æ„Ÿç±»å‹å æ¯” #}
      <div class="col-lg-4 col-md-6">
         <div class="card card-block card-stretch card-height">
            <div class="card-header d-flex justify-content-between">
               <div class="header-title">
                  <h4 class="card-title">æƒ…æ„Ÿç±»å‹å æ¯”</h4>
               </div>
               <div class="card-header-toolbar d-flex align-items-center">
                  <div class="dropdown">

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-event">
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                 </svg>
                                 Edit
                           </a>
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                 </svg>
                                 View
                           </a>
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                 </svg>
                                 Delete
                           </a>
                        </div>
                     </div>
               </div>
            </div>
            <div class="card-body p-0">
               <div id="main_two" style="width: 100%; height: 350px;"></div>
            </div>
         </div>
      </div>

      {% if is_get_url != 1 %}
          {# å¾®åšç±»å‹å æ¯” #}
          <div class="col-lg-4 col-md-6">
             <div class="card card-block card-stretch card-height">
                <div class="card-header d-flex justify-content-between">
                   <div class="header-title">
                      <h4 class="card-title">å¾®åšç±»å‹æ±‡æ€»å æ¯”å›¾ï¼ˆç‚¹èµæ•°>5000ï¼‰</h4>
                   </div>
                   <div class="card-header-toolbar d-flex align-items-center">
                      <div class="dropdown">

                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-event">
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                     </svg>
                                     Edit
                               </a>
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                     </svg>
                                     View
                               </a>
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                     </svg>
                                     Delete
                               </a>
                            </div>
                         </div>
                   </div>
                </div>
                <div class="card-body p-0">
                       <div id="main_three" style="width: 100%; height: 350px;">
    <!--                       {% if is_get_url == 1 %}-->
    <!--                            <img src="../../resources/static/image/wordCloud_unit.jpg" alt="" style="width: 370px; max-height: 350px;">-->
    <!--                        {% else %}-->
    <!--                            <img src="../../resources/static/image/wordCloud_all.jpg" alt="" style="width: 370px; max-height: 350px;">-->
    <!--                        {% endif %}-->
                       </div>
                </div>
             </div>
          </div>

          {# å¾®åšå‘è¡¨æ—¶é—´å æ¯” #}
          <div class="col-lg-4 col-md-6">
             <div class="card card-block card-stretch card-height">
                <div class="card-header d-flex justify-content-between">
                   <div class="header-title">
                      <h4 class="card-title">å¾®åšå‘è¡¨æ—¶é—´å æ¯”</h4>
                   </div>
                   <div class="card-header-toolbar d-flex align-items-center">
                      <div class="dropdown">

                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-event">
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                     </svg>
                                     Edit
                               </a>
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                     </svg>
                                     View
                               </a>
                               <a class="dropdown-item" href="#">
                                     <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                     </svg>
                                     Delete
                               </a>
                            </div>
                         </div>
                   </div>
                </div>
                <div class="card-body p-0">
                   <div id="main_four" style="width: 100%; height: 350px;"></div>
                </div>
             </div>
          </div>
      {% endif %}
       <!--
      <div class="col-lg-8 col-md-12">
         <div class="card">
            <div class="card-header d-flex justify-content-between">
               <div class="header-title">
                  <h4 class="card-title">New Customer</h4>
               </div>
               <div class="card-header-toolbar d-flex align-items-center">
                  <div class="dropdown">
                        <a href="#" class="text-muted pl-3" id="dropdownMenuButton-customer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24">
                              <g fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                 <circle cx="12" cy="12" r="1"></circle>
                                 <circle cx="19" cy="12" r="1"></circle>
                                 <circle cx="5" cy="12" r="1"></circle></g>
                           </svg>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-customer">
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                 </svg>
                                 Edit
                           </a>
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                 </svg>
                                 View
                           </a>
                           <a class="dropdown-item" href="#">
                                 <svg class="svg-icon text-secondary" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                 </svg>
                                 Delete
                           </a>
                        </div>
                     </div>
               </div>
            </div>
            <div class="card-body p-0">
               <div class="table-responsive">
                  <table class="table mb-0">
                     <thead class="table-color-heading">
                        <tr class="text-secondary">
                           <th scope="col">Date</th>
                           <th scope="col">Customer</th>
                           <th scope="col">Status</th>
                           <th scope="col" class="text-right">Total</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr class="white-space-no-wrap">
                           <td>01 Jun 2020</td>
                           <td>
                              <div class="d-flex align-items-center">
                                 <div class="avatar-45 mr-2">
                                    <img src="../../resources/static/picture/2.jpg" class="img-fluid rounded-circle" alt="image">
                                 </div>
                                 <div>Maggie Potts</div>
                              </div>
                           </td>
                           <td>
                              <p class="mb-0 text-success d-flex justify-content-start align-items-center">
                                 <small><svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" viewbox="0 0 24 24" fill="none">
                                 <circle cx="12" cy="12" r="8" fill="#3cb72c"></circle></svg>
                                 </small> Completed
                              </p>
                           </td>
                           <td class="text-right">$104.98</td>
                        </tr>
                        <tr class="white-space-no-wrap">
                           <td>02 Jun 2020</td>
                           <td>
                              <div class="d-flex align-items-center">
                                 <div class="avatar-45 mr-2">
                                    <img src="../../resources/static/picture/5.jpg" class="img-fluid rounded-circle" alt="image">
                                 </div>
                                 <div>Kevin Adkins</div>
                              </div>
                           </td>
                           <td>
                              <p class="mb-0 text-success d-flex justify-content-start align-items-center">
                                 <small><svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" viewbox="0 0 24 24" fill="none">
                                 <circle cx="12" cy="12" r="8" fill="#3cb72c"></circle></svg>
                                 </small> Completed
                              </p>
                           </td>
                           <td class="text-right">$233.00</td>
                        </tr>
                        <tr class="white-space-no-wrap">
                           <td>05 Jun 2020</td>
                           <td>
                              <div class="d-flex align-items-center">
                                 <div class="avatar-45 mr-2">
                                    <img src="../../resources/static/picture/1.jpg" class="img-fluid rounded-circle" alt="image">
                                 </div>
                                 <div>Max Lynn</div>
                              </div>
                           </td>
                           <td>
                              <p class="mb-0 text-warning d-flex justify-content-start align-items-center">
                                 <small><svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" viewbox="0 0 24 24" fill="none">
                                 <circle cx="12" cy="12" r="8" fill="#db7e06"></circle></svg>
                                 </small>Pending
                              </p>
                           </td>
                           <td class="text-right">$150.01</td>
                        </tr>
                        <tr class="white-space-no-wrap">
                           <td>06 Jun 2020</td>
                           <td>
                              <div class="d-flex align-items-center">
                                 <div class="avatar-45 mr-2">
                                    <img src="../../resources/static/picture/3.jpg" class="img-fluid rounded-circle" alt="image">
                                 </div>
                                 <div>Danniw Yatt</div>
                              </div>
                           </td>
                           <td>
                              <p class="mb-0 text-danger d-flex justify-content-start align-items-center">
                                 <small><svg class="mr-2" xmlns="http://www.w3.org/2000/svg" width="18" viewbox="0 0 24 24" fill="none">
                                 <circle cx="12" cy="12" r="8" fill="#F42B3D"></circle></svg>
                                 </small>Cancelled
                              </p>
                           </td>
                           <td class="text-right">$199.99</td>
                        </tr>
                     </tbody>
                  </table>
                  <div class="d-flex justify-content-end align-items-center border-top-table p-3">
                           <button class="btn btn-secondary btn-sm">See All</button>
                        </div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-lg-4 col-md-12">
         <div class="card">
            <div class="card-body">
               <h4 class="font-weight-bold mb-3">City Orders Statistics</h4>
               <div id="chart-map-column-04" class="custom-chart"></div>
            </div>
         </div>
      </div>-->
   </div>
    <!-- Page end  -->
</div>
{% endblock %}




{% block chart %}

    {# å¾®åšå‘å¸ƒæ—¶é—´ä¸ªæ•°åŠ¨æ€è¶‹åŠ¿å›¾ #}
    <script>

        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        var option;
        var date_count = {{ date_count|tojson }}
        var date_weibo_count = {{ date_weibo_count }}
        var xRes = []
        var yRes = []
        // å°†date_countå’Œdate_weibo_countè½¬æ¢æˆjsæ•°ç»„
        for(var i = 0; i < 8; i++){
            xRes.push(date_count[i])
            yRes.push(date_weibo_count[i])
        }

        option = {
          xAxis: {
            type: 'category',
            boundaryGap: false,
                    data: {{ date_count|tojson }}
          },
          yAxis: {
            type: 'value'
          },
          series: [
            {
                    name:"æ—¥æœŸ",
                    data: {{ date_weibo_count }},
              type: 'line',
              areaStyle: {
                    color:"rgba(0, 128, 255, 0.2)"
              },
                    smooth:true,
                    lineStyle:{
                      width:5
                    },
                    emphasis:{
                      focus:"series"
                    }
                    }
          ],
                    tooltip:{
                        trigger:'axis'
                    },
                    legend: {
                        top: '5%',
                        left: 'center'
                    },
                    toolbox: {
                        show: true,
                        feature: {
                              dataZoom: {
                                yAxisIndex: 'none'
                              },
                              dataView: { readOnly: false },
                              magicType: { type: ['line', 'bar'] },
                              restore: {},
                              saveAsImage: {}
                        }
                    },
        };



        option && myChart.setOption(option);

                      function startInterval() {
                          let count = 8;
                          timer = setInterval(()=>{
                              if(count >= date_count.length) count=0
                              xRes.shift()
                              xRes.push(date_count[count])
                              yRes.shift()
                              yRes.push(date_weibo_count[count])
                              count++
                              myChart.setOption({
                              xAxis:[{
                                  data:xRes
                              }],
                              series:[{
                                  data:yRes
                              }]
                          })
                          }, 2000);
                      }

                      startInterval();

                      // è·å–å›¾è¡¨çš„ DOM å®¹å™¨
                      var chartContainer = document.getElementById('main');

                      // æ·»åŠ é¼ æ ‡ç§»å…¥äº‹ä»¶ç›‘å¬ï¼Œä½¿ç”¨äº‹ä»¶æ•è·
                      chartContainer.addEventListener('mouseover', function(event) {
                          // å¤„ç†é€»è¾‘
                          clearInterval(timer)

                          console.log('é¼ æ ‡ç§»å…¥å®¹å™¨', event);
                      }, true); // true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘

                      // æ·»åŠ é¼ æ ‡ç§»å‡ºäº‹ä»¶ç›‘å¬ï¼Œä½¿ç”¨äº‹ä»¶æ•è·
                      chartContainer.addEventListener('mouseout', function(event) {
                          // å¤„ç†é€»è¾‘
                          startInterval();
                          console.log('é¼ æ ‡ç§»å‡ºå®¹å™¨', event);
                      }, true); // true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘
    </script>

    {# å¾®åšæ–‡ç« ç±»å‹é¥¼å›¾ #}
    <script>
        var chartDom = document.getElementById('main_two');
        var myChart_two = echarts.init(chartDom);
        var option;

        option = {
          tooltip: {
            trigger: 'item'
          },
          legend: {
            type: 'scroll',
            top: '1%'
          },
          series: [
            {
              name: 'Access From',
              type: 'pie',
              radius: '50%',
              data: {{ article_sentiments|tojson }},
              emphasis: {
                itemStyle: {
                  shadowBlur: 10,
                  shadowOffsetX: 0,
                  shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
              }
            }
          ]
        };

        option && myChart_two.setOption(option);


    </script>

    {% if is_get_url != 1 %}
        {# å¤§ç‚¹èµæ•°å¾®åšç±»å‹é¥¼å›¾ #}
        <script>
            var chartDom = document.getElementById('main_three');
            var myChart_two = echarts.init(chartDom);
            var option;

            option = {
              tooltip: {
                trigger: 'item'
              },
              legend: {
                type: 'scroll',
                top: '1%'
              },
              series: [
                {
                  name: 'Access From',
                  type: 'pie',
                  radius: '50%',
                  data: {{ article_type_count_gt_5000|tojson }},
                  emphasis: {
                    itemStyle: {
                      shadowBlur: 10,
                      shadowOffsetX: 0,
                      shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                  }
                }
              ]
            };

            option && myChart_two.setOption(option);

        </script>

        {# å¾®åšå‘å¸ƒæ—¶é—´å æ¯”ç¯å›¾ #}
    {% endif %}
    <script>
        var chartDom = document.getElementById('main_four');
        var myChart_four = echarts.init(chartDom);
        var option;

        option = {
          tooltip: {
            trigger: 'item'
          },
          legend: {
            type: 'scroll',
            left: 'center'
          },
          series: [
            {
              name: 'å‘è¡¨æ—¶é—´',
              type: 'pie',
              radius: ['60%', '50%'],
              avoidLabelOverlap: false,
              label: {
                show: false,
                position: 'center'
              },
              emphasis: {
                label: {
                  show: true,
                  fontSize: 20,
                  fontWeight: 'bold'
                }
              },
              labelLine: {
                show: false
              },
              data: {{ articles_date|tojson }}
            }
          ]
        };

        option && myChart_four.setOption(option);


    </script>

{% endblock %}


